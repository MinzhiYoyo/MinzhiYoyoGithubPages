<!DOCTYPE html>
<html>

	<head>
		
<title>计算机网络技术之数据链路层-雨探青鸟</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">


<meta name="keywords" content="考研,计算机网络技术,物理层,">
<meta name="description" content="计算机网络技术之数据链路层">


<script src="/js/jquery.min.js"></script>



<!-- Baidu Analytics -->
<script defer>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>



<link rel="stylesheet" href="/css/myhihglight.css">


		<!-- <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css"> -->
		
	<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		
<link rel="stylesheet" href="/css/page.css">


<link rel="stylesheet" href="/css/page_cente.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/header.css">

	<div class="header">
		<div class="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										主页
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										档案
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										分类
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										标签
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										友链
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										关于
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/photo">
										照片墙
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/donation">
										捐赠
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>MINZHI</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">主页</a>
        </li>
        
        <li>
            <a href="/archives">档案</a>
        </li>
        
        <li>
            <a href="/categories">分类</a>
        </li>
        
        <li>
            <a href="/tags">标签</a>
        </li>
        
        <li>
            <a href="/links">友链</a>
        </li>
        
        <li>
            <a href="/about">关于</a>
        </li>
        
        <li>
            <a href="/photo">照片墙</a>
        </li>
        
        <li>
            <a href="/donation">捐赠</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/MinzhiYoyo">
            <img src="https://imagere.oss-cn-beijing.aliyuncs.com/img/202204241803604.png" alt="Quiet主题">
        </a>
        
        <a target="_blank" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2498369702&amp;site=qq&amp;menu=yes">
            <img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145144258400.png" alt="Quiet主题">
        </a>
        
        <a target="_blank" rel="noopener" href="https://t.me/Yoyesam">
            <img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145144831592.png" alt="Quiet主题">
        </a>
        
        <a href="mailto:2498369702@qq.com">
            <img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145145415984.png" alt="Quiet主题">
        </a>
        
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/178629981?spm_id_from=333.337.0.0">
            <img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145145970793.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'
    style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.3;z-index: 108;'>
</div>
<style>
    .sidebar {
        width: 0;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        background: #fff;
        z-index: 999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815)
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $(function () { $('.h-right-close>svg').click(function () { $('.sidebar').animate({ width: "66%" }, 500); $('.shelter').fadeIn("slow") }); $('.shelter').click(function (e) { $('.sidebar').animate({ width: "0" }, 500); $('.shelter').fadeOut("slow") }) })
</script>
		<script>
			$(function () { $(window).scroll(function () { if ($(document).scrollTop() > 100) { $(".header-top").removeClass("header-move2"); $('.header-top').addClass('header-move1') } else { $(".header-top").removeClass("header-move1"); $('.header-top').addClass('header-move2') } }) });
		</script>
<div class="header-bg ">
    <div class="bg-content">
        <ul class="tag">
            
            
            <li><a href="/tags/考研">考研</a></li>
            
            <li><a href="/tags/计算机网络技术">计算机网络技术</a></li>
            
            <li><a href="/tags/物理层">物理层</a></li>
            
            
        </ul>
        <h1>计算机网络技术之数据链路层</h1>
        <div class="article-info">
            <div class="article-author">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <g>
                        <path fill="#12183A"
                            d="M6.187 15.265A6.47 6.47 0 0 0 10 16.5a6.47 6.47 0 0 0 3.813-1.235A4.99 4.99 0 0 0 10 13.5a4.99 4.99 0 0 0-3.813 1.765zM5.082 14.25A6.485 6.485 0 0 1 10 12c1.965 0 3.726.872 4.918 2.25a6.5 6.5 0 1 0-9.836 0zM10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z">
                        </path>
                    </g>
                </svg>
                
                <span> <a href="">MINZHI</a></span>
                <p>2022-06-16 10:12:19</p>
            </div>
        </div>
    </div>
</div>
<div class="article-content">
    <div id="article" class="content">
        <h1 id="一、基础知识"><a href="#一、基础知识" class="headerlink" title="一、基础知识"></a>一、基础知识</h1><h2 id="1、数据链路层的主要任务"><a href="#1、数据链路层的主要任务" class="headerlink" title="1、数据链路层的主要任务"></a>1、数据链路层的主要任务</h2><p>&emsp;主要包括三个任务：<strong>封装成帧</strong>，<strong>透明传输</strong>和<strong>差错检测</strong>。点对点通信。</p>
<ul>
<li>将网络层交下来的IP数据报封装成帧</li>
<li>把封装好的帧发送给其他节点的数据链路层</li>
<li>接收其他节点发过来的帧，检测如果无差错，提取出IP数据报并交付给网络层；有差错就直接丢弃帧。</li>
</ul>
<h2 id="2、名词解释"><a href="#2、名词解释" class="headerlink" title="2、名词解释"></a>2、名词解释</h2><ul>
<li>链路：从一个节点到另一个节点的一段物理线路</li>
<li>数据链路：在链路基础上，增加了执行通信协议的软硬件，构成了数据链路。</li>
<li>网络适配器：称为网卡，实现上述协议的软硬件</li>
<li>帧：数据链路层的协议数据单元（PDU），也是最小传输单位。</li>
</ul>
<h1 id="二、任务实现"><a href="#二、任务实现" class="headerlink" title="二、任务实现"></a>二、任务实现</h1><h2 id="1、封装成帧"><a href="#1、封装成帧" class="headerlink" title="1、封装成帧"></a>1、封装成帧</h2><p>&emsp;将上一层的网络层交付下来的数据报，加上帧首部与帧尾部之后，交付给物理层进行透明传输。也<strong>只有数据链路层</strong>会添加尾部。并且还会在帧前面和尾部加上帧界定符，帧开始加入<strong>帧开始符（SOH，0x01）</strong>，帧结束处加上<strong>帧结束符（EOT，0x04）</strong>，帧结束符可以判断帧是否完整，除此之外，<strong>PPP协议</strong>还会加入<strong>前导码（7个字节，0101…01）</strong>，前导码之后才是帧开始符。<strong>注意：</strong>上述0x01和0x04在谢书是这样，很多其他地方查的都不一样。</p>
<p>&emsp;规定帧的格式与使用的协议有关，我们将会在<strong>PPP协议</strong>中具体讲到。</p>
<h2 id="2、透明传输"><a href="#2、透明传输" class="headerlink" title="2、透明传输"></a>2、透明传输</h2><p>&emsp;我们已经知道了，帧开始符与帧结束符是一个固定的十六进制数，假如我们传输的数据中包含帧结束符的十六进制数据，那么应该如何处理这种情况呢？这就要求我们对数据进行<strong>透明传输</strong>。最常用的方法就是使用转义字符，也就是<strong>字节填充</strong>或<strong>字符填充</strong>，在数据部分中，有帧结束符的字符前面插入<strong>ESC（0x1B）</strong>。</p>
<p>&emsp;实现透明传输与使用的协议有关，所以我们将会在<strong>PPP协议</strong>中具体讲到。</p>
<h2 id="3、差错检测"><a href="#3、差错检测" class="headerlink" title="3、差错检测"></a>3、差错检测</h2><p>&emsp;现在的通信线路都不是很理想，容易发生比特错误，即1变成0或者0变成1。因此，差错检测是非常有必要的。常用的差错检测方法有，奇偶校验码和循环冗余码。除了进行检错之外，还发明了一种具有纠错功能的方法——海明码。</p>
<h3 id="1）检错之奇偶校验码"><a href="#1）检错之奇偶校验码" class="headerlink" title="1）检错之奇偶校验码"></a>1）检错之奇偶校验码</h3><p>&emsp;奇偶校验码包括<strong>奇校验码</strong>和<strong>偶校验码</strong>，发送的比特流包含n位，其中前n-1位是数据，最后一位是<strong>校验位</strong>。</p>
<ul>
<li>奇校验：<strong>n-1位数据</strong>加上<strong>校验位</strong>的中<strong>1的个数</strong>是<strong>奇</strong>数，<strong>n位</strong>比特进行<strong>异或</strong>为<strong>1</strong>。</li>
<li>偶校验：<strong>n-1位数据</strong>加上<strong>校验位</strong>的中<strong>1的个数</strong>是<strong>偶</strong>数，<strong>n位</strong>比特进行<strong>异或</strong>为<strong>0</strong>。</li>
</ul>
<p>&emsp;异或是一个比较重要的运算，在检验中常常用到。这里用异或是杀鸡用牛刀，海明码需要用到异或。这里给出异或的性质：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">左操作数</th>
<th style="text-align:center">异或</th>
<th style="text-align:center">右操作数</th>
<th style="text-align:center">=</th>
<th style="text-align:center">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center"><script type="math/tex">\bigoplus</script></td>
<td style="text-align:center">0</td>
<td style="text-align:center">=</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center"><script type="math/tex">\bigoplus</script></td>
<td style="text-align:center">1</td>
<td style="text-align:center">=</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><script type="math/tex">\bigoplus</script></td>
<td style="text-align:center">0</td>
<td style="text-align:center">=</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><script type="math/tex">\bigoplus</script></td>
<td style="text-align:center">1</td>
<td style="text-align:center">=</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>与0异或，可以留出原来的状态</li>
<li>与1异或，可以获取相反的状态</li>
<li>2k和1异或是0，2k-1个1异或还是1</li>
<li>满足交换律，<script type="math/tex">a \bigoplus b = b\bigoplus a</script></li>
</ul>
<h3 id="2）检错之循环冗余码"><a href="#2）检错之循环冗余码" class="headerlink" title="2）检错之循环冗余码"></a>2）检错之循环冗余码</h3><p>&emsp;上述编码其实只能够检测到奇数比特出错，如果是偶数个比特出错，检测就会失效了。所以，循环冗余码能够更有效地检测帧的正确与否，但是循环冗余码不能进行纠错，也就是不能确定错误出在哪个位置。循环冗余码检测通过之后，能够以接近1的概率认为此帧没有出错。并且CRC可以由硬件完成，所以速度非常快。</p>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ul>
<li>首先，双方协定一个多项式，多项式能够对应于一个二进制比特序列<strong>除数P</strong>，P有h位</li>
<li>用<strong>数据M</strong>后面拼接上<strong>h-1位0</strong>，对上述P进行<strong>模2除</strong>法，小学数学学到的<strong>除过程</strong>中用的<strong>减法</strong>变成了<strong>异或</strong>运算而已。</li>
<li>最后得到的<strong>余数</strong>长度应该是<strong>比P少1位</strong>，少不止1位，就在前面填充0，这个拼接到M的后面就成为了新的数据。</li>
<li>接收方收到数据后，只需要把<strong>接收到的数据</strong>对<strong>P</strong>进行<strong>模2除</strong>法，如果<strong>余数为0</strong>，便<strong>通过</strong>，然后再把最后的检验位去除便可。</li>
</ul>
<p>其中，<strong>除数P</strong>应该是：</p>
<ul>
<li><p><strong>除数P</strong>：</p>
<blockquote>
<p>&emsp;一个包含n位的序列，对应的多项式应该是<script type="math/tex">a_{n-1}X^{n-1}+a_{n-2}X^{n-2}+...+a_1X^1+a_0X^0</script>，至于怎么转成二进制序列呢？</p>
<p>如二进制序列<strong>110110</strong>对应的多项式应该是<script type="math/tex">1\times2^5 + 1\times2^4+0\times2^3+1\times2^2+1\times2^1+0\times2^0</script>。</p>
</blockquote>
</li>
<li><p><strong>现在广泛使用的多项式：</strong></p>
<blockquote>
<p>① <strong>CRC-16:</strong> <script type="math/tex">X^{16}+X^{15}+X^{2}+1</script></p>
<p>② <strong>CRC-CCITT:</strong> <script type="math/tex">X^{16}+X^{12}+X^{5}+1</script></p>
<p>③ <strong>CRC-32:</strong> <script type="math/tex">X^{32}+X^{26}+X^{23}+X^{22}+X^{16}+X^{12}+X^{11}+X^{10}+X^{8}+X^{7}+X^{5}+X^{4}+X^{2}+X^{}+1</script></p>
</blockquote>
</li>
</ul>
<h3 id="3）纠错之海明码"><a href="#3）纠错之海明码" class="headerlink" title="3）纠错之海明码"></a>3）纠错之海明码</h3><p>&emsp;前面提到的两种方法，都只适用于检错，如果出现差错，那么只能丢弃差错帧。而海明码，不仅可以检测出差错帧，还能检测出在哪出现的差错帧，并对其进行纠正。但是，海明码也只能<strong>发现双比特错误</strong>，<strong>纠正单比特错误</strong>。</p>
<ul>
<li>海明距离：两个比特码对应位不同的个数</li>
<li><strong>纠错</strong>d位，需要<strong>码距</strong>为<strong>2d+1</strong>的解决方案</li>
<li><strong>检错</strong>d位，需要<strong>码距</strong>为<strong>d+1</strong>的解决方案</li>
</ul>
<h4 id="确定检验位数"><a href="#确定检验位数" class="headerlink" title="确定检验位数"></a>确定检验位数</h4><p>&emsp;如果需要对<strong>长度为n</strong>的有效信息进行检验，需要<strong>k位</strong>检验码，n与k之间的关系式应该是怎样的呢？</p>
<p>&emsp;首先，我们知道，海明码只对单个比特进行纠错，就是假设只有单个比特发生错误。那么，接收方收到的数据有多少种情况呢？应该是有<strong>有效信息发生错误（n种）</strong>加上<strong>校验码发生错误（k种）</strong>再加上<strong>全部正确（1种）</strong>的总共<script type="math/tex">n+k+1</script>种情况。那么，k位校验码能够代表多少种情况呢？应该是<script type="math/tex">2^k</script>种情况。所以，得到<strong>关系式</strong>为：<script type="math/tex">n+k+1\leq2^k</script>。</p>
<h4 id="校验码应该如何放置"><a href="#校验码应该如何放置" class="headerlink" title="校验码应该如何放置"></a>校验码应该如何放置</h4><p>&emsp;按照以往来说，校验码都是拼接到数据的最后部分。而海明码则不是拼接到数据最后部分，这样能够快地确定纠错位置。</p>
<p>&emsp;海明码规定，第<code>i</code>位海明码<script type="math/tex">P_i</script>应该在<strong>整个数据（有效数据+检验码）</strong>第<script type="math/tex">2^{i-1}</script>的位置。如，第1位海明码在数据的第1位，第2位海明码在数据的第2位，第3位海明码在数据的第4位，第5位海明码在数据的第16位。</p>
<h4 id="检验原理与步骤"><a href="#检验原理与步骤" class="headerlink" title="检验原理与步骤"></a>检验原理与步骤</h4><p>&emsp;假设海明码用<strong>H</strong>表示，有效数据用<strong>D</strong>表示，总数据位用<strong>C</strong>来表示。我们要明确一个概念，现在不仅仅是对有效数据在检验，而是对整个数据都在检验，与前面的检验方法有所不同。</p>
<p>&emsp;假设我们有效数据为<strong>n=4</strong>位，即可算出校验数据只需要<strong>k=3</strong>位即可，太多了浪费。下面总数据的序号用二进制表示，方便之后理解。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">111</th>
<th style="text-align:center">110</th>
<th style="text-align:center">101</th>
<th style="text-align:center">100</th>
<th style="text-align:center">011</th>
<th style="text-align:center">010</th>
<th style="text-align:center">001</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>海明码</strong></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"><script type="math/tex">H_3,2^{3-1}=b100</script></td>
<td style="text-align:center"></td>
<td style="text-align:center"><script type="math/tex">H_2,2^{2-1}=b010</script></td>
<td style="text-align:center"><script type="math/tex">H_1,2^{1-1}=b001</script></td>
</tr>
<tr>
<td style="text-align:center"><strong>有效数据</strong></td>
<td style="text-align:center"><script type="math/tex">D_4</script></td>
<td style="text-align:center"><script type="math/tex">D_3</script></td>
<td style="text-align:center"><script type="math/tex">D_2</script></td>
<td style="text-align:center"></td>
<td style="text-align:center"><script type="math/tex">D_1</script></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<p>那么如何计算H呢？只需要用<strong>异或</strong>即可，哪几位异或呢？</p>
<p>&emsp;从上面我们知道，<script type="math/tex">H_i</script>对应于总数据的位置是<script type="math/tex">2^{i-1}</script>，显然数字<script type="math/tex">2^{i-1}</script>对应的二进制序列<strong>只有一位</strong>为1，而且恰好是<strong>第i位</strong>，其他都为0，不信可以写一写。我们只需要把<strong>总数据序号</strong>中，<strong>第i位为1</strong>的数据拿出来异或，异或后的值就是<script type="math/tex">H_i</script>的值了。</p>
<p>总结下来说，不那么绕的来说就是，<script type="math/tex">H_i</script>对<strong>序号</strong>中<strong>第i位为1</strong>的数据进行检验。</p>
<script type="math/tex; mode=display">H_1 = D_1 \bigoplus D_2 \bigoplus D_4 \\ H_2 = D_1 \bigoplus D_3 \bigoplus D_4 \\H_3 = D_2 \bigoplus D_3 \bigoplus D_4</script><p>&emsp;现在收到数据之后，如何进行检验呢？检验完之后，如果找错出错位呢？上述提到海明码计算使用的异或来做的，相当于把原始状态异或后保存到了海明码中。异或能够同为0，异为1。我们把原始状态保存到海明码中了，现在接收到的状态便在数据中，所以，只需要检验数据中的状态与原始状态是否相同即可。那么我们可以得出如下式子。</p>
<script type="math/tex; mode=display">S_1 = H_1 \bigoplus D_1 \bigoplus D_2 \bigoplus D_4 \\ S_2 = H_2 \bigoplus D_1 \bigoplus D_3 \bigoplus D_4 \\S_3 =H_3 \bigoplus D_2 \bigoplus D_3 \bigoplus D_4</script><p>&emsp;如果<script type="math/tex">S_1S_2S_3 = 000</script>，那么说明状态没有改变，接收到的数据是正确的。如果不为0呢？怎么知道哪里发生错误。显然我们在检验过程中有，<script type="math/tex">H_1</script>对序号第1位为1的所有数据进行检验，<script type="math/tex">H_2</script>对序号第2位为1的所有数据进行检验，<script type="math/tex">H_3</script>对序号第3位为1的所有数据进行了检验。</p>
<p>&emsp;因此，<script type="math/tex">S_i</script>为1的话，代表序号中<strong>第i位</strong>为1的位置的数据有错误，将所有的S都拼接，即可确定发生错误在序号中的位置。如<script type="math/tex">S_3S_2S_1=010</script>，代表序号中第2位发生了错误，只需要把第2位进行取反即可。</p>
<h1 id="三、PPP协议"><a href="#三、PPP协议" class="headerlink" title="三、PPP协议"></a>三、PPP协议</h1><h2 id="1、PPP协议满足的需求"><a href="#1、PPP协议满足的需求" class="headerlink" title="1、PPP协议满足的需求"></a>1、PPP协议满足的需求</h2><ul>
<li>（1）简单：就追求着简单，采用CRC检验，如果发生错误了，直接丢弃帧，什么也不做。正确就收下帧。</li>
<li>（2）封装成帧：规定了特殊字段作为帧界定符。前面提到过，这里协议具体讲。</li>
<li>（3）透明性：保证数据透明性。前面提到过，这里协议具体讲。</li>
<li>（4）多种网络层协议：保证同一条物理链路上同时支持多种网络协议，如（IP和IPX等）。</li>
<li>（5）多种类型链路：除了要支持多种网络协议外，还需要在多种物理链路运行，如串并，电光等。</li>
<li>（6）差错检测：对收到的帧进行差错检测</li>
<li>（7）检测连接状态：能够判断链路是否正常工作</li>
<li>（8）最大传送单元：限定了点对点<strong>最大传送单元MTU</strong>，数据部分不包括头尾部分，默认值是1500字节。</li>
<li>（9）网络层地址协商：使得双方的网络层能够知晓对方IP地址</li>
<li>（10）数据压缩协商：提供一种方法来协商数据压缩算法，但不一定要标准化。</li>
</ul>
<h2 id="2、PPP协议的帧格式"><a href="#2、PPP协议的帧格式" class="headerlink" title="2、PPP协议的帧格式"></a>2、PPP协议的帧格式</h2><div class="table-container">
<table>
<thead>
<tr>
<th>F(0x7E), 1B</th>
<th>A(0xFF), 1B</th>
<th>C(0x01), 1B</th>
<th>协议, 2B</th>
<th>数据部分, 1500B以内</th>
<th>FCS, 2B</th>
<th>F(0x7E), 1B</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><strong>F</strong>：帧界定符，二进制为：0111 1110。注意，这里有6个连续的1，之后会用到。</li>
<li><strong>A</strong>：这个字段相当于保留字段，目前没有任何定义</li>
<li><strong>C</strong>：同上</li>
<li><strong>协议</strong>：表示数据部分使用的协议。比如，0x0021代表IP数据报。0xC021代表LCP（链路控制协议）数据。</li>
<li><strong>FCS</strong>：帧检验序列，采用的是CRC检验</li>
</ul>
<h2 id="3、PPP协议的透明传输"><a href="#3、PPP协议的透明传输" class="headerlink" title="3、PPP协议的透明传输"></a>3、PPP协议的透明传输</h2><p>&emsp;前面提到为什么需要透明传输，以及什么是透明传输。PPP协议有如下方法：</p>
<h3 id="（1）字节填充"><a href="#（1）字节填充" class="headerlink" title="（1）字节填充"></a>（1）字节填充</h3><p>&emsp;就是使用转义字符，转义字符定义为<strong>0x7D（0111 1101）</strong> </p>
<ul>
<li>1）如果数据中出现（0x7E），那么就变成 （0x7D，0x5E）</li>
<li>2）如果数据中出现（0x7D），那么就变成（0x7D，0x5D）</li>
<li>3）如果出现ASCII码控制字符，数值小于0x20的字符，那么就在此字符前面加上0x7D，并将其加以改变，比如加上0x20。</li>
</ul>
<h3 id="（2）零比特填充"><a href="#（2）零比特填充" class="headerlink" title="（2）零比特填充"></a>（2）零比特填充</h3><p>&emsp;我们前面提到，0x7E中有连续的6个1，那么我们只要保证数据中没有连续的6个1即可，具体做法是，每发现5个1，就填充1个0。接收数据后，只要每发现5个1，就删除后面的1个0。</p>
<h3 id="（3）其他方法"><a href="#（3）其他方法" class="headerlink" title="（3）其他方法"></a>（3）其他方法</h3><p>&emsp;这些不是PPP协议的内容，但是也是进行透明传输的方法。</p>
<ul>
<li>字符计数法：在帧的头部加上一个表示该帧后面跟随的字节数。这样，就能明确边界在哪了。这种方法的问题就是，出现一个错误，那么后面全部的帧都发生错误。</li>
<li>违规编码法：在物理层常使用这种方法，如曼彻斯特编码中，一个比特位周期的电平要么是 高-低，要么是 低-高，所以，高-高或者低-低就是违规编码，我们用来作为帧的开始和结束。</li>
</ul>
<h2 id="4、PPP协议的工作状态"><a href="#4、PPP协议的工作状态" class="headerlink" title="4、PPP协议的工作状态"></a>4、PPP协议的工作状态</h2><p>&emsp;我们知道PPP协议主要是为了传输网络层的数据，但是，数据链路层也有自己的数据需要传送，如有些链路需要建立连接。PPP协议组成应该包含了三个部分，<strong>一是</strong>将IP数据报封装到串行链路中，既支持异步链路，又支持面向比特的同步链路。<strong>二是</strong>用来建立、配置和测试数据链路连接的<strong>链路控制协议LCP（Link Control Protocol）</strong>。<strong>三是</strong>一套<strong>网络控制协议（Network Control Protocol）</strong>，这其中，每一个协议支持不同的网络层协议。</p>
<p>&emsp;用户接入ISP后，会主动发送一系列LCP分组，以便建立LCP。紧接着，NCP就会为新接入的主机分配一个IP地址。用户通信完毕，NCP收回IP地址，并释放连接。步骤如下图所示：<img src="https://imagere.oss-cn-beijing.aliyuncs.com/img/202206161415001.png" alt="image-20220616141536749"></p>
<p>&emsp;PPP链路起始和终止状态都是<strong>链路静止</strong>状态，用户发起连接后（如连接一个WiFi，接上一根网线），进入了链路建立状态。这是LCP开始进行一些协商，发送LCP<strong>配置请求帧</strong>，包括<strong>配置确认帧（接受）、配置否认帧（理解意思但不接受）和配置拒绝帧（无法识别或不接受）</strong>。之后ISP对用户进行鉴别（如WiFi密码正确与否，账号密码登录，网费是否充足）。采用了<strong>口令鉴别协议PAP（Password Authentication Protocol）或口令握手鉴别协议CHAP（Challenge-Handshake Authentication Protocol）</strong>。之后便进入了网络层协议。</p>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">
    </div>
</div>
<style>
    #noneimg img {
        display: none;
        z-index: 109;
        width: 600px !important;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            width: 88%
        }
    }
</style>
<script>
    $(function () { $('#article').click(function (e) { if (e.target.tagName == "IMG") { if ($('#nonediv').length == 0) { let MImg = `<div id='noneimg'><img src='${e.target.currentSrc}'></div>`; let MDiv = "<div id='nonediv' style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.3;z-index: 108;'></div>"; $('#article').append(MDiv); $('#article').append(MImg); $("#nonediv").fadeIn("slow"); $("#noneimg img").fadeIn("slow") } } else { if ($('#nonediv').length !== 0) { $("#noneimg ").fadeOut("slow"); $("#nonediv").fadeOut("slow"); setTimeout(function () { $('#nonediv').remove(); $('#noneimg').remove() }, 500) } } }); $('.article-content').addClass('content-move') });
</script>
<div class="Last-Next">
    

    
    <a href="/2022/06/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E4%B9%8B%E7%89%A9%E7%90%86%E5%B1%82/">
        <div class="next">
            <span>下一篇</span>
            <p>计算机网络技术之物理层</p>
        </div>
    </a>
    
</div>
		
<link rel="stylesheet" href="/css/food.css">

<div class="footer">
	<div class="Copyright">
		©2022 By MINZHI.    本站总访问量：
		<!-- . 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/qiaobug/hexo-theme-quiet">Quiet</a> -->
	<!-- </div>
	<div class="Copyright"> -->
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
		<span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span>次。</span>
		<span>
			<a style="text-decoration: none;display: contents; color: #898F9F;"
				target="_blank" rel="noopener" href="https://beian.miit.gov.cn">
				湘ICP备2022006759号
			</a>
		</span>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/MinzhiYoyo">
			<img src="https://imagere.oss-cn-beijing.aliyuncs.com/img/202204241803604.png" alt="Quiet主题">
		</a>
		
		<a target="_blank" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2498369702&amp;site=qq&amp;menu=yes">
			<img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145144258400.png" alt="Quiet主题">
		</a>
		
		<a target="_blank" rel="noopener" href="https://t.me/Yoyesam">
			<img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145144831592.png" alt="Quiet主题">
		</a>
		
		<a href="mailto:2498369702@qq.com">
			<img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145145415984.png" alt="Quiet主题">
		</a>
		
		<a target="_blank" rel="noopener" href="https://space.bilibili.com/178629981?spm_id_from=333.337.0.0">
			<img src="http://imagere.oss-cn-beijing.aliyuncs.com/img/20220525145145970793.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src='https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js'></script>
<script>
	if (window.mermaid) {
		// console.log('开启mermaid');
		mermaid.initialize({ theme: 'forest' });
	}
</script>

<script src="/js/jquery.min.js"></script>


<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: block;
            border-radius: 50%;
            width: 66px;
            height: 66px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            border: 1px solid rgba(18, 24, 58, 0.06);

            transition: border .5s;
            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 30px;
            height: 30px;
            margin-top: 17.5px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $('#js-go_top').gotoTop({ offset: 500, speed: 300, animationShow: { 'transform': 'translate(0,0)', 'transition': 'transform .5s ease-in-out' }, animationHide: { 'transform': 'translate(100px,0)', 'transition': 'transform .5s ease-in-out' } });
</script>

		<script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!-- <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>

</html>